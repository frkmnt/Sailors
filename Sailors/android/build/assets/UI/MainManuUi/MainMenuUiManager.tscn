[gd_scene load_steps=5 format=2]

[ext_resource path="res://Assets/Fonts/Custom_Fonts/cardTitleLabel.tres" type="DynamicFont" id=1]
[ext_resource path="res://UI/MainManuUi/PlayMenu/AddPlayers/AddPlayerPanel.tscn" type="PackedScene" id=2]
[ext_resource path="res://UI/MainManuUi/DeckMenu/CardEditorMenu.tscn" type="PackedScene" id=4]

[sub_resource type="GDScript" id=1]
script/source = "extends Panel

#==== References ====#
var r_game_manager
onready var r_viewport = get_viewport()

#==== Components ====#
var c_add_players_panel
var c_card_editor_panel
var c_admob

#==== Variables ====#
var v_design_size = Vector2(1080, 1920)

var a_players
var c_deck
 



#==== Bootstrap ====#

func initialize(game_manager):
	r_game_manager = game_manager
	initialize_panels()
	initialize_resolution()
	grab_focus()



func initialize_panels():
	var menu_container = get_child(3)
	
	c_card_editor_panel = menu_container.get_child(0)
	c_card_editor_panel.initialize(self)
	
	c_add_players_panel = menu_container.get_child(1)
	c_add_players_panel.initialize(self, c_card_editor_panel.c_deck_viewer)


func initialize_resolution():
	r_viewport.connect(\"size_changed\", self, \"window_resize\")
	window_resize()


func window_resize():
	r_viewport.set_size_override(true, v_design_size)


func start_game():
	r_game_manager.load_game(a_players, c_deck)




#==== UI Logic ====#

func on_open():
	visible = true
	grab_focus()


func on_close():
	visible = false


func play_button():
	c_add_players_panel.on_open()


func deck_button():
	c_card_editor_panel.on_open()


func reset_panel():
	c_add_players_panel.on_close()
	c_add_players_panel.reset_panel()
	c_card_editor_panel.on_close()



"

[node name="MainMenuUiManager" type="Panel"]
margin_right = 1080.0
margin_bottom = 1920.0
script = SubResource( 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Title" type="Label" parent="."]
margin_right = 1080.0
margin_bottom = 350.0
custom_fonts/font = ExtResource( 1 )
text = "SAILORS"
align = 1
valign = 1
autowrap = true

[node name="PlayButton" type="Button" parent="."]
margin_left = 240.0
margin_top = 500.0
margin_right = 840.0
margin_bottom = 900.0
custom_fonts/font = ExtResource( 1 )
text = "PLAY"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="DeckEditor" type="Button" parent="."]
margin_left = 240.0
margin_top = 1200.0
margin_right = 840.0
margin_bottom = 1600.0
custom_fonts/font = ExtResource( 1 )
text = "DECK"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MenuContainer" type="Control" parent="."]
__meta__ = {
"_edit_use_anchors_": false
}

[node name="CardEditorPanel" parent="MenuContainer" instance=ExtResource( 4 )]
visible = false

[node name="AddPlayerPanel" parent="MenuContainer" instance=ExtResource( 2 )]
visible = false

[connection signal="pressed" from="PlayButton" to="." method="play_button"]
[connection signal="button_down" from="DeckEditor" to="." method="card_editor_button"]
